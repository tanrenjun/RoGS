seed: 17
device: "cuda:0"
output: "./output"

dataset:
  dataset: "NuscDataset"
  version: "mini"
  base_dir: /home/tanrenjun/datasets/nuScenes/v1.0-mini/
  image_dir: /home/tanrenjun/datasets/nuScenes/nuScenes_clip/nuScenes_clip/
  road_gt_dir: /home/tanrenjun/datasets/nuScenes/nuScenes_road_gt
  replace_name: False
  clip_list:
    - "scene-0655"

  min_distance: 0.2

  # resized image size
  image_width: 800
  image_height: 450

  camera_names:
    - "CAM_FRONT"
    - "CAM_FRONT_LEFT"
    - "CAM_FRONT_RIGHT"
    - "CAM_BACK"
    - "CAM_BACK_LEFT"
    - "CAM_BACK_RIGHT"

train:
  vis: False
  debug_from: -1
  detect_anomaly: False
  start_checkpoint: ""
  eval: True
  save: False

model:
  # ====== Adaptive Grid Configuration (KD-tree V2) ======
  use_adaptive_grid: True  # Set to True to use adaptive grid instead of fixed grid
  
  # Base resolution for rendering
  bev_resolution: 0.05  # meters (used for BEV camera rendering)
  cut_range: 8
  
  # KD-tree V2 parameters
  kdtree_bev_resolution: 0.05  # BEV feature map resolution
  kdtree_min_area: 0.01  # Minimum cell area (0.1m * 0.1m), larger to reduce vertices
  kdtree_max_depth: 12  # Maximum tree depth, reduced to limit subdivision
  kdtree_geo_weight: 0.7  # Weight for geometric features
  kdtree_sem_weight: 0.3  # Weight for semantic features
  kdtree_percentile: 20.0  # Auto-threshold percentile (higher = less subdivision)
  kdtree_use_trajectory_crop: True  # Crop BEV to trajectory region
  
  # Gaussian model parameters
  sh_degree: 3
  use_rgb: True
  opt_xy: False
  white_background: False
  use_exposure: True

optimization:
  epochs: 2
  random_background: False
  position_lr_init: 0.000016
  position_lr_final: 0.0000016
  position_lr_delay_mult: 0.01
  position_lr_max_steps: 4000
  percent_dense: 0.01
  feature_lr: 0.0005
  opacity_lr: 0.0001
  scaling_lr: 0.0001
  rotation_lr: 0.0001
  rgb_lr: 0.008
  label_lr: 0.1
  exposure_lr: 0.001

  seg_loss_weight: 0.06
  smooth_loss_weight: 0.003  # 1 if z_weight > 0
  depth_loss_weight: 0
  z_weight: 0   # 0.02 if supervise z

pipeline:
  convert_SHs_python: False
  compute_cov3D_python: False
  debug: False
